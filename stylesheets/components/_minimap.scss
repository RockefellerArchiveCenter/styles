// -----------------------------------------------------------------------------
// This file contains all styles related to the minimap component.
// -----------------------------------------------------------------------------

/**
* Creates classes .minimap--{{count}}-across that specify the number of
* 1fr grid-templates-columns between 1 and 20. For example, the
* .minimap--5-across class specifies 5 columns. For more than 20
* columns, adjust the $grid-col-count variable.
**/
$grid-col-count: 20;

@mixin grid-col-count-class {
  @for $count from 1 through $grid-col-count {
    .minimap--#{$count}-across {
      grid-template-columns: repeat($count, 1fr);
    }
  }
}

/**
* Styles for checkmark content shown for visited links
* 1. Checkmark
* 2. Font size is an imperfect solution, because it is small on large squares
* and impacts box layout for very small squares.
**/
@mixin checkmark {
  content: '\2713'; /* 1 */
  font-family: monospace;
  font-size: 20px; /* 2 */
  line-height: 0;
  pointer-events: none;
}

/**
* Mixin for styles on hover, focus, or active events used for minimap links.
**/
@mixin transition-area {
  @include on-event {
    border: 2px solid;
    border-radius: 2px;
    outline: none;

    @media (prefers-reduced-motion: no-preference) {
      transform: scale(1.25);
    }
  }
}

/**
* Mixin for minimap hit links with a "color" variable argument.
* 1. Allow checkmark for visited links to be centered in the box.
**/
@mixin minimap-hit($color) {
  @include transition-area;

  align-items: center; /* 1 */
  background: $color;
  color: $color;
  display: flex; /* 1 */
  justify-content: center; /* 1 */
  text-decoration: none;

  @include on-event {
    border-color: darken($color, 20%);
    color: $color;
  }

  &::after {
    @include checkmark;
  }

  &:visited {
    background-color: darken($color, 10%);
    color: $white;
  }
}

/**
* Styles for minimap that uses grid display. On medium and small screens, styles
* assume the minimap will be inside of a modal.
* 1. Increases gutter space between grid items on small screens.
**/
.minimap {
  align-content: start;
  display: grid;
  float: left;
  gap: 8px; /* 1 */
  grid-template-rows: auto;
  height: 100%;
  width: 100%;
  z-index: 998;

  @include md-up {
    gap: 1px; /* 1 */
  }
}

/**
* Includes the classes to specify grid-template-columns number
**/
@include grid-col-count-class;

/**
* Styles for the minimap grid item boxes.
* 1. Ensures that the boxes are square.
**/
.minimap__box {
  aspect-ratio: 1/1; /* 1 */
  background-color: $wan-white-grey;
  border-radius: 2px;
  box-sizing: border-box;
}

/**
* Styles for the minimap links.
**/
.minimap__digital-hit {
  @include minimap-hit($yale-blue);
}

.minimap__record-hit {
  @include minimap-hit($flame-orange);
}
